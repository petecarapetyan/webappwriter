const t=(t,e=0,s=1)=>t>s?s:t<e?e:t,e=(t,e=0,s=Math.pow(10,e))=>Math.round(s*t)/s,s=t=>("#"===t[0]&&(t=t.substr(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}:{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:1}),o=t=>{const{h:s,s:o,l:r}=(({h:t,s:s,v:o,a:r})=>{const i=(200-s)*o/100;return{h:e(t),s:e(i>0&&i<200?s*o/100/(i<=100?i:200-i)*100:0),l:e(i/2),a:e(r,2)}})(t);return`hsl(${s}, ${o}%, ${r}%)`},r=({h:t,s:s,v:o,a:r})=>{t=t/360*6,s/=100,o/=100;const i=Math.floor(t),n=o*(1-s),a=o*(1-(t-i)*s),h=o*(1-(1-t+i)*s),l=i%6;return{r:e(255*[o,a,n,n,h,o][l]),g:e(255*[h,o,o,a,n,n][l]),b:e(255*[n,n,h,o,o,a][l]),a:e(r,2)}},i=t=>{const e=t.toString(16);return e.length<2?"0"+e:e},n=({r:t,g:e,b:s})=>"#"+i(t)+i(e)+i(s),a=({r:t,g:s,b:o,a:r})=>{const i=Math.max(t,s,o),n=i-Math.min(t,s,o),a=n?i===t?(s-o)/n:i===s?2+(o-t)/n:4+(t-s)/n:0;return{h:e(60*(a<0?a+6:a)),s:e(i?n/i*100:0),v:e(i/255*100),a:r}},h=(t,e)=>{if(t===e)return!0;for(const s in t)if(t[s]!==e[s])return!1;return!0},l=t=>{const e=document.createElement("template");return e.innerHTML=t,e},c=(t,e)=>{const s=t.shadowRoot||t.attachShadow({mode:"open"});return s.appendChild(e.content.cloneNode(!0)),s};const u=l('<style>:host{outline:none}:host(:focus) [part=pointer]{transform:translate(-50%, -50%) scale(1.1)}#interactive{position:absolute;left:0;top:0;width:100%;height:100%;touch-action:none;user-select:none;-webkit-user-select:none}[part=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%, -50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part=pointer]::after{display:block;content:"";position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;background-color:currentColor}</style><div id="interactive"><div part="pointer"></div></div>');let d=!1;const p=t=>"touches"in t,b=(t,e,s)=>{t.dispatchEvent(new CustomEvent("move",{bubbles:!0,detail:t.getMove(e,s)}))},v=(e,s)=>{const o=p(s)?s.touches[0]:s,r=e.getBoundingClientRect();b(e,{left:t((o.pageX-(r.left+window.pageXOffset))/r.width),top:t((o.pageY-(r.top+window.pageYOffset))/r.height)})};class f extends HTMLElement{constructor(){super(),this.pointer=c(this,u).querySelector("[part=pointer]").style,this.addEventListener("mousedown",this),this.addEventListener("touchstart",this),this.addEventListener("keydown",this),this.setAttribute("role","slider"),this.setAttribute("tabindex","0")}set dragging(t){const e=t?document.addEventListener:document.removeEventListener;e(d?"touchmove":"mousemove",this),e(d?"touchend":"mouseup",this)}handleEvent(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!(t=>!(d&&!p(t)||(d||(d=p(t)),0)))(t)||!d&&0!=t.button)return;v(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),v(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":((t,e)=>{const s=e.keyCode;s>40||t.xy&&s<37||s<33||(e.preventDefault(),b(t,{left:39===s?.01:37===s?-.01:34===s?.05:33===s?-.05:35===s?1:36===s?-1:0,top:40===s?.01:38===s?-.01:0},!0))})(this,t)}}setStyles(t){for(const e in t)this.pointer.setProperty(e,t[e])}}const g=l("<style>:host{position:relative;bottom:0;left:0;right:0;height:24px;background:linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)}[part=pointer]{top:50%;z-index:2}</style>");customElements.define("vc-hue",class extends f{constructor(){super(),c(this,g),this.setAttribute("aria-label","Hue"),this.setAttribute("aria-valuemin","0"),this.setAttribute("aria-valuemax","360")}connectedCallback(){if(this.hasOwnProperty("hue")){const t=this.hue;delete this.hue,this.hue=t}}get xy(){return!1}get hue(){return this._h}set hue(t){this._h=t,this.setStyles({left:t/360*100+"%",color:o({h:t,s:100,v:100,a:1})}),this.setAttribute("aria-valuenow",`${e(t)}`)}getMove(e,s){return{h:s?t(this.hue+360*e.left,0,360):360*e.left}}});const m=l("<style>:host{display:block;position:relative;flex-grow:1;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top, #000, rgba(0, 0, 0, 0)),linear-gradient(to right, #fff, rgba(255, 255, 255, 0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=pointer]{z-index:3}</style>");customElements.define("vc-saturation",class extends f{constructor(){super(),c(this,m),this.setAttribute("aria-label","Color")}connectedCallback(){if(this.hasOwnProperty("hsva")){const t=this.hsva;delete this.hsva,this.hsva=t}}get xy(){return!0}get hsva(){return this._hsva}set hsva(t){this._hsva=t,this.style.backgroundColor=o({h:t.h,s:100,v:100,a:1}),this.setStyles({top:100-t.v+"%",left:`${t.s}%`,color:o(t)}),this.setAttribute("aria-valuetext",`Saturation ${e(t.s)}%, Brightness ${e(t.v)}%`)}getMove(e,s){return{s:s?t(this.hsva.s+100*e.left,0,100):100*e.left,v:s?t(this.hsva.v-100*e.top,0,100):Math.round(100-100*e.top)}}});const x=l('\n<style>:host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none !important}[part]:last-child{border-radius:0 0 8px 8px}</style>\n<vc-saturation part="saturation" exportparts="pointer: saturation-pointer"></vc-saturation>\n<vc-hue part="hue" exportparts="pointer: hue-pointer"></vc-hue>\n'),y=Symbol("h"),w=Symbol("s"),k=Symbol("same"),E=Symbol("color"),M=Symbol("hsva"),C=Symbol("change"),S=Symbol("render");class A extends HTMLElement{constructor(){super();const t=c(this,x);t.addEventListener("move",this),this[w]=t.children[1],this[y]=t.children[2]}static get observedAttributes(){return["color"]}get color(){return this[E]}set color(t){if(!this[k](t)){const e=this.colorModel.toHsva(t);this[S](e),this[C](t,e)}}connectedCallback(){if(this.hasOwnProperty("color")){const t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(t,e,s){const o=this.colorModel.fromAttr(s);this[k](o)||(this.color=o)}handleEvent(t){const e=Object.assign({},this[M],t.detail);let s;this[S](e),h(e,this[M])||this[k](s=this.colorModel.fromHsva(e))||this[C](s,e)}[k](t){return this.color&&this.colorModel.equal(t,this.color)}[S](t){this[w].hsva=t,this[y].hue=t.h}[C](t,e){this[E]=t,this[M]=e,this.dispatchEvent(new CustomEvent("color-changed",{bubbles:!0,detail:{value:t}}))}}const L={defaultColor:"#000",toHsva:t=>a(s(t)),fromHsva:t=>n(r(t)),equal:(t,e)=>t.toLowerCase()===e.toLowerCase()||h(s(t),s(e)),fromAttr:t=>t};class H extends A{get colorModel(){return L}}customElements.define("hex-color-picker",class extends H{});
